<!DOCTYPE html>
<html lang="he" dir="rtl">
    
<!--Generated By OmriW-->
<!--Search&Login to SuperMarket Client System-->

<!--Created With AngularJS-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>טבלת לקוחות הסופר</title>
    <!--Importing Angular API-->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.5/angular.min.js"></script>
    <!--Importing Angular API-->

    <link rel="stylesheet" type="text/css" href="Site_Style.css" title="Style">
    <style> </style>
</head>
<body>
    <div>
        <marquee behavior="" direction="left" >טבלת לקוחות</marquee>
    </div>

        
<div ng-app="CustomerFactory">
	<div ng-controller="Customers">
        <div style="text-align:center;margin-bottom:48px;">
        <h1>הוספה וחיפוש </h1>
        <h2>לקוחות בסופר 'שפע יששכר'</h2>
    </div>

        <div class="gray-box" align-content="stretch" style="text-align: right">
            <div class="table-headline ">חיפוש לקוח קיים: </div>

		<p><input type="text" placeholder=" הזן שם לחיפוש" ng-model="filter_name"> <span ng-bind="filter_name"> </p>

        <div class="table-headline ">רישום לקוח: </div>

        <p>

            <input type="text" ng-model="new_customer.name" placeholder="שם לקוח להוספה">
            <input type="text" ng-model="new_customer.id" placeholder="ת.ז לקוח">
            <input type="text" ng-model="new_customer.gender" placeholder="מין">
            <input type="text" ng-model="new_customer.mail" placeholder="כתובת מייל">
			<button ng-click="addCustomer()">הוסף לקוח</button>
        </p>
    <div class="table-box">
		<table>
			<thead>
                <th>שם הלקוח</th>
                <th>מס' ת.ז</th>
                <th>מין</th>
                <th>כתובת מייל</th>
				<th>תאריך הוספה</th>
				<th>פעולות לביצוע</th>
			</thead>
			<tr ng-repeat="customer in customers | filter: filter_name | orderBy: 'name'" ng-class="{fade: startFade}">
                <td ng-bind="customer.name" class="table-parameters"></td>
                <td ng-bind="customer.id" class="table-parameters"></td>
                <td ng-bind="customer.gender" class="table-parameters"></td>
                <td ng-bind="customer.mail" class="table-parameters"></td>
				<td ng-bind="customer.created_date" class="table-parameters"></td>
				<td><button ng-click="removeCustomer($index)" class="remove-button">הסר לקוח מהרשימה</td>
			</tr>
        </table>
    </div>

        </div>
    </div>    
</div>


	<script>
		var CustomerFactory = angular.module('CustomerFactory', []);
		CustomerFactory.controller('Customers', function($scope){
			$scope.customers = [
			];
			$scope.addCustomer = function(){
				for(var i=0; i<$scope.customers.length; i++){
					if($scope.new_customer.name === $scope.customers[i].name){
						alert('לא ניתן להוסיף לקוח עם אותו שם פעמיים!');
						return false;
					}
				}
				$scope.customers.push({
                    name: $scope.new_customer.name,
                    id: $scope.new_customer.id,
                    gender: $scope.new_customer.gender,
                    mail: $scope.new_customer.mail,
					created_date: Date(),
				});
            }
            
			$scope.removeCustomer = function(index){
				$scope.customers.splice(index, 1);
			}
		});
    </script>
    
    </div>

    <br>
    <div style="text-align:center;margin-bottom:48px;">
        <button id="goback" class="goback" onclick="window.location.href='index.html'">חזרה לדף ההרשמה</button>		
	</div>
    
    
</body>
</html>